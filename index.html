<!DOCTYPE html>
<html>
  <head>
    <title>GeoConverter</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конвертер координат Lat/Lon ↔ UTM ↔ MGRS</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.8.0/proj4.js"></script>
    <!-- Додаємо просту реалізацію MGRS -->
    <script>
        // Проста реалізація MGRS конвертації
        function convertToMGRS(lat, lon) {
            // Визначаємо UTM зону
            const utmZone = Math.floor((lon + 180) / 6) + 1;
            
            // Конвертуємо в UTM
            const utmProj = `+proj=utm +zone=${utmZone} +datum=WGS84 +units=m +no_defs`;
            const [easting, northing] = proj4("WGS84", utmProj, [lon, lat]);
            
            // Визначаємо літерну позначку зони (спрощено)
            const latBands = 'CDEFGHJKLMNPQRSTUVWXX';
            const latIndex = Math.floor((lat + 80) / 8);
            const latBand = latBands[Math.min(Math.max(latIndex, 0), latBands.length - 1)];
            
            // Визначаємо 100км квадрат (спрощено)
            const e100k = Math.floor(easting / 100000);
            const n100k = Math.floor(northing / 100000);
            
            // Таблиці для літер 100км квадратів (спрощено)
            const eastingLetters = 'ABCDEFGHJKLMNPQRSTUVWXYZ';
            const northingLetters = 'ABCDEFGHJKLMNPQRSTUV';
            
            const eastingLetter = eastingLetters[e100k % eastingLetters.length];
            const northingLetter = northingLetters[n100k % northingLetters.length];
            
            // Координати в межах 100км квадрату
            const eastingRemainder = Math.floor(easting % 100000);
            const northingRemainder = Math.floor(northing % 100000);
            
            // Форматуємо результат (10-значний)
            const eastingStr = eastingRemainder.toString().padStart(5, '0');
            const northingStr = northingRemainder.toString().padStart(5, '0');
            
            return `${utmZone}${latBand}${eastingLetter}${northingLetter}${eastingStr}${northingStr}`;
        }
        
        function convertFromMGRS(mgrsString) {
            // Проста реалізація парсингу MGRS (базова)
            const match = mgrsString.match(/^(\d{1,2})([C-X])([A-Z])([A-Z])(\d{2,10})$/);
            if (!match) {
                throw new Error('Некоректний формат MGRS');
            }
            
            const [, zone, latBand, eastLetter, northLetter, coords] = match;
            
            // Розділяємо координати на easting та northing
            const coordLen = coords.length;
            if (coordLen % 2 !== 0) {
                throw new Error('Некоректна довжина координат');
            }
            
            const precision = coordLen / 2;
            const eastingStr = coords.substring(0, precision);
            const northingStr = coords.substring(precision);
            
            // Конвертуємо в повні UTM координати (спрощено)
            const easting = parseInt(eastingStr) * Math.pow(10, 5 - precision);
            const northing = parseInt(northingStr) * Math.pow(10, 5 - precision);
            
            // Конвертуємо з UTM в WGS84
            const utmProj = `+proj=utm +zone=${zone} +datum=WGS84 +units=m +no_defs`;
            const [lon, lat] = proj4(utmProj, "WGS84", [easting, northing]);
            
            return [lat, lon];
        }
    </script>
    <script async
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBwGrlOp-k99i4mj_q7v9uTxzXmEF9-GWM&callback=initMap">
    </script>
  </body>
</html>









