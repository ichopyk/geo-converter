<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç Lat/Lon ‚Üî UTM ‚Üî MGRS</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.8.0/proj4.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .main-container {
            display: flex;
            height: 100vh;
        }
        
        #map {
            flex: 1;
            height: 100%;
            position: relative;
        }
        
        .control-panel {
            width: 420px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-left: 1px solid rgba(0, 0, 0, 0.1);
            padding: 25px;
            overflow-y: auto;
            box-shadow: -5px 0 20px rgba(0, 0, 0, 0.15);
        }
        
        .control-panel h1 {
            font-size: 22px;
            margin-bottom: 25px;
            color: #2c3e50;
            text-align: center;
            font-weight: 600;
        }
        
        .input-group {
            margin-bottom: 18px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #34495e;
            font-size: 14px;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 25px;
        }
        
        button {
            padding: 14px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .mgrs-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 2px solid #ecf0f1;
        }
        
        .mgrs-section h3 {
            margin-bottom: 18px;
            color: #2c3e50;
            font-size: 18px;
            font-weight: 600;
        }
        
        .result-section {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #dee2e6;
            font-size: 14px;
            line-height: 1.6;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .result-section strong {
            color: #2c3e50;
        }
        
        .result-section small {
            color: #6c757d;
            font-style: italic;
        }
        
        .map-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .map-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }
        
        .map-controls {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            color: #6c757d;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            #map {
                height: 40%;
            }
            
            .control-panel {
                width: 100%;
                height: 60%;
            }
            
            .map-controls {
                top: auto;
                bottom: 15px;
                left: 15px;
                right: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- –ö–∞—Ä—Ç–∞ –∑–∞–π–º–∞—î –≤—Å—é –ª—ñ–≤—É —á–∞—Å—Ç–∏–Ω—É -->
        <div id="map">
            <div class="map-placeholder">
                <div>
                    <div style="margin-bottom: 10px;">üó∫Ô∏è –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞</div>
                    <div style="font-size: 14px; opacity: 0.8;">–ö–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –¥–ª—è —ó—Ö –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è</div>
                </div>
            </div>
        </div>
        
        <!-- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞ –ø–∞–Ω–µ–ª—å —Å–ø—Ä–∞–≤–∞ -->
        <div class="control-panel">
            <h1>–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç</h1>
            
            <!-- –°–µ–∫—Ü—ñ—è –≤–≤–æ–¥—É Lat/Lon -->
            <div class="input-group">
                <label for="latInput">–®–∏—Ä–æ—Ç–∞:</label>
                <input type="text" id="latInput" placeholder="50.4501">
            </div>
            
            <div class="input-group">
                <label for="lonInput">–î–æ–≤–≥–æ—Ç–∞:</label>
                <input type="text" id="lonInput" placeholder="30.5234">
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó -->
            <div class="button-group">
                <button onclick="convertLatLonToUTM()">‚Üí UTM</button>
                <button onclick="convertLatLonToMGRS()">‚Üí MGRS</button>
                <button onclick="convertLatLonToAll()">‚Üí UTM + MGRS</button>
                <button onclick="convertLatLonToAllPrecisions()">‚Üí MGRS (–≤—Å—ñ —Ç–æ—á–Ω–æ—Å—Ç—ñ)</button>
                <button onclick="showOnMap()">–ü–æ–∫–∞–∑–∞—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç—ñ</button>
            </div>
            
            <!-- –°–µ–∫—Ü—ñ—è MGRS -->
            <div class="mgrs-section">
                <h3>–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∑ MGRS</h3>
                <div class="input-group">
                    <label for="mgrsInput">MGRS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:</label>
                    <input type="text" id="mgrsInput" placeholder="36UYA1234567890">
                </div>
                <div class="button-group">
                    <button onclick="convertMGRSToLatLon()">‚Üí Lat/Lon</button>
                </div>
            </div>
            
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ -->
            <div id="result" class="result-section" style="display: none;"></div>
        </div>
    </div>
    
    <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–∞—Ä—Ç—É -->
    <div class="map-controls">
        üí° –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω—ñ –Ω–∞ –∫–∞—Ä—Ç—ñ –ø—ñ—Å–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó
    </div>
    
    <script>
        // –í–ª–∞—Å–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è MGRS –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó
        class MGRSConverter {
            constructor() {
                this.latBands = 'CDEFGHJKLMNPQRSTUVWXX';
                this.e1 = (1 - Math.sqrt(1 - 0.00669437999014)) / (1 + Math.sqrt(1 - 0.00669437999014));
                this.a = 6378137.0; // WGS84 major axis
                this.b = 6356752.314245; // WGS84 minor axis
                this.k0 = 0.9996; // UTM scale factor
            }
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∑ Lat/Lon –≤ UTM
            latLonToUTM(lat, lon) {
                const zone = Math.floor((lon + 180) / 6) + 1;
                const lonOrigin = (zone - 1) * 6 - 180 + 3;
                
                const latRad = lat * Math.PI / 180;
                const lonRad = lon * Math.PI / 180;
                const lonOriginRad = lonOrigin * Math.PI / 180;
                
                const eccPrimeSquared = 0.00669437999014 / (1 - 0.00669437999014);
                const N = this.a / Math.sqrt(1 - 0.00669437999014 * Math.sin(latRad) * Math.sin(latRad));
                const T = Math.tan(latRad) * Math.tan(latRad);
                const C = eccPrimeSquared * Math.cos(latRad) * Math.cos(latRad);
                const A = Math.cos(latRad) * (lonRad - lonOriginRad);
                
                const M = this.a * ((1 - 0.00669437999014 / 4 - 3 * 0.00669437999014 * 0.00669437999014 / 64 - 5 * 0.00669437999014 * 0.00669437999014 * 0.00669437999014 / 256) * latRad
                    - (3 * 0.00669437999014 / 8 + 3 * 0.00669437999014 * 0.00669437999014 / 32 + 45 * 0.00669437999014 * 0.00669437999014 * 0.00669437999014 / 1024) * Math.sin(2 * latRad)
                    + (15 * 0.00669437999014 * 0.00669437999014 / 256 + 45 * 0.00669437999014 * 0.00669437999014 * 0.00669437999014 / 1024) * Math.sin(4 * latRad)
                    - (35 * 0.00669437999014 * 0.00669437999014 * 0.00669437999014 / 3072) * Math.sin(6 * latRad));
                
                const x = this.k0 * N * (A + (1 - T + C) * A * A * A / 6 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120) + 500000.0;
                const y = this.k0 * (M + N * Math.tan(latRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720));
                
                if (lat < 0) {
                    return {
                        zone: zone,
                        easting: x,
                        northing: y + 10000000.0,
                        hemisphere: 'S'
                    };
                } else {
                    return {
                        zone: zone,
                        easting: x,
                        northing: y,
                        hemisphere: 'N'
                    };
                }
            }
            
            // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ª—ñ—Ç–µ—Ä–Ω–æ—ó –ø–æ–∑–Ω–∞—á–∫–∏ –∑–æ–Ω–∏
            getLatitudeBand(lat) {
                const latIndex = Math.floor((lat + 80) / 8);
                return this.latBands[Math.min(Math.max(latIndex, 0), this.latBands.length - 1)];
            }
            
            // –û—Ç—Ä–∏–º–∞–Ω–Ω—è 100–∫–º –∫–≤–∞–¥—Ä–∞—Ç—É
            get100kmSquare(zone, easting, northing) {
                const setOriginColumnLetters = 'ABCDEFGHJKLMNPQRSTUVWXYZ';
                const setOriginRowLetters = 'ABCDEFGHJKLMNPQRSTUV';
                
                const col = Math.floor(easting / 100000);
                const row = Math.floor(northing / 100000) % 20;
                
                return setOriginColumnLetters[col] + setOriginRowLetters[row];
            }
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤ MGRS
            latLonToMGRS(lat, lon, precision = 5) {
                const utm = this.latLonToUTM(lat, lon);
                const latBand = this.getLatitudeBand(lat);
                const square = this.get100kmSquare(utm.zone, utm.easting, utm.northing);
                
                const easting = Math.floor(utm.easting % 100000);
                const northing = Math.floor(utm.northing % 100000);
                
                const factor = Math.pow(10, 5 - precision);
                const eastingStr = Math.floor(easting / factor).toString().padStart(precision, '0');
                const northingStr = Math.floor(northing / factor).toString().padStart(precision, '0');
                
                return `${utm.zone}${latBand}${square}${eastingStr}${northingStr}`;
            }
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∑ MGRS –≤ Lat/Lon
            mgrsToLatLon(mgrsString) {
                const mgrs = mgrsString.trim().toUpperCase();
                
                // –ü–∞—Ä—Å–∏–Ω–≥ MGRS
                const zoneMatch = mgrs.match(/^(\d+)([A-Z])([A-Z]{2})(.*)$/);
                if (!zoneMatch) {
                    throw new Error('–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç MGRS');
                }
                
                const zone = parseInt(zoneMatch[1]);
                const latBand = zoneMatch[2];
                const square = zoneMatch[3];
                const coords = zoneMatch[4];
                
                const precision = coords.length / 2;
                const easting = parseInt(coords.substring(0, precision));
                const northing = parseInt(coords.substring(precision));
                
                const factor = Math.pow(10, 5 - precision);
                const utmEasting = easting * factor + 500000;
                const utmNorthing = northing * factor;
                
                return this.utmToLatLon(utmEasting, utmNorthing, zone, latBand < 'N' ? 'S' : 'N');
            }
            
            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∑ UTM –≤ Lat/Lon
            utmToLatLon(easting, northing, zone, hemisphere) {
                const x = easting - 500000.0;
                const y = hemisphere === 'S' ? northing - 10000000.0 : northing;
                
                const lonOrigin = (zone - 1) * 6 - 180 + 3;
                const eccPrimeSquared = 0.00669437999014 / (1 - 0.00669437999014);
                
                const M = y / this.k0;
                const mu = M / (this.a * (1 - 0.00669437999014 / 4 - 3 * 0.00669437999014 * 0.00669437999014 / 64 - 5 * 0.00669437999014 * 0.00669437999014 * 0.00669437999014 / 256));
                
                const phi1Rad = mu + (3 * this.e1 / 2 - 27 * this.e1 * this.e1 * this.e1 / 32) * Math.sin(2 * mu)
                    + (21 * this.e1 * this.e1 / 16 - 55 * this.e1 * this.e1 * this.e1 * this.e1 / 32) * Math.sin(4 * mu)
                    + (151 * this.e1 * this.e1 * this.e1 / 96) * Math.sin(6 * mu);
                
                const N1 = this.a / Math.sqrt(1 - 0.00669437999014 * Math.sin(phi1Rad) * Math.sin(phi1Rad));
                const T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);
                const C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);
                const R1 = this.a * (1 - 0.00669437999014) / Math.pow(1 - 0.00669437999014 * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);
                const D = x / (N1 * this.k0);
                
                const lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24
                    + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);
                
                const lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);
                
                return [lat * 180 / Math.PI, lonOrigin + lon * 180 / Math.PI];
            }
        }
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
        const mgrsConverter = new MGRSConverter();
        
        // Define the projections
        proj4.defs("WGS84", "+proj=longlat +datum=WGS84 +no_defs");
        
        function showResult(content) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = content;
            resultDiv.style.display = 'block';
        }
        
        function convertLatLonToUTM() {
            const lat = parseFloat(document.getElementById('latInput').value);
            const lon = parseFloat(document.getElementById('lonInput').value);
            
            if (isNaN(lat) || isNaN(lon)) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —à–∏—Ä–æ—Ç–∏ —Ç–∞ –¥–æ–≤–≥–æ—Ç–∏');
                return;
            }
            
            try {
                const utm = mgrsConverter.latLonToUTM(lat, lon);
                const latBand = mgrsConverter.getLatitudeBand(lat);
                
                showResult(`
                    <strong>UTM —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
                    –ó–æ–Ω–∞: ${utm.zone}${latBand} (${utm.hemisphere})<br>
                    Easting: ${utm.easting.toFixed(2)} –º<br>
                    Northing: ${utm.northing.toFixed(2)} –º<br>
                    UTM: ${utm.zone}${latBand} ${utm.easting.toFixed(0)}E ${utm.northing.toFixed(0)}N
                `);
            } catch (error) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó –≤ UTM - ' + error.message);
            }
        }
        
        function convertLatLonToMGRS() {
            const lat = parseFloat(document.getElementById('latInput').value);
            const lon = parseFloat(document.getElementById('lonInput').value);
            
            if (isNaN(lat) || isNaN(lon)) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —à–∏—Ä–æ—Ç–∏ —Ç–∞ –¥–æ–≤–≥–æ—Ç–∏');
                return;
            }
            
            try {
                const mgrsCoord = mgrsConverter.latLonToMGRS(lat, lon);
                const utm = mgrsConverter.latLonToUTM(lat, lon);
                const latBand = mgrsConverter.getLatitudeBand(lat);
                
                showResult(`
                    <strong>MGRS —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
                    MGRS: <strong>${mgrsCoord}</strong><br>
                    UTM –∑–æ–Ω–∞: ${utm.zone}${latBand} (${utm.hemisphere})<br>
                    <small>–¢–æ—á–Ω—ñ—Å—Ç—å: 1 –º–µ—Ç—Ä (5 —Ü–∏—Ñ—Ä)</small>
                `);
            } catch (error) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó –≤ MGRS - ' + error.message);
            }
        }
        
        function convertLatLonToAll() {
            const lat = parseFloat(document.getElementById('latInput').value);
            const lon = parseFloat(document.getElementById('lonInput').value);
            
            if (isNaN(lat) || isNaN(lon)) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —à–∏—Ä–æ—Ç–∏ —Ç–∞ –¥–æ–≤–≥–æ—Ç–∏');
                return;
            }
            
            try {
                const utm = mgrsConverter.latLonToUTM(lat, lon);
                const latBand = mgrsConverter.getLatitudeBand(lat);
                const mgrsCoord = mgrsConverter.latLonToMGRS(lat, lon);
                
                showResult(`
                    <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó:</strong><br><br>
                    <strong>–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:</strong><br>
                    –®–∏—Ä–æ—Ç–∞: ${lat.toFixed(6)}¬∞<br>
                    –î–æ–≤–≥–æ—Ç–∞: ${lon.toFixed(6)}¬∞<br><br>
                    <strong>UTM:</strong><br>
                    –ó–æ–Ω–∞: ${utm.zone}${latBand} (${utm.hemisphere})<br>
                    Easting: ${utm.easting.toFixed(2)} –º<br>
                    Northing: ${utm.northing.toFixed(2)} –º<br>
                    –ü–æ–≤–Ω–∏–π UTM: ${utm.zone}${latBand} ${utm.easting.toFixed(0)}E ${utm.northing.toFixed(0)}N<br><br>
                    <strong>MGRS:</strong><br>
                    <strong>${mgrsCoord}</strong><br>
                    <small>–¢–æ—á–Ω—ñ—Å—Ç—å: 1 –º–µ—Ç—Ä</small>
                `);
            } catch (error) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó - ' + error.message);
            }
        }
        
        function convertLatLonToAllPrecisions() {
            const lat = parseFloat(document.getElementById('latInput').value);
            const lon = parseFloat(document.getElementById('lonInput').value);
            
            if (isNaN(lat) || isNaN(lon)) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —à–∏—Ä–æ—Ç–∏ —Ç–∞ –¥–æ–≤–≥–æ—Ç–∏');
                return;
            }
            
            try {
                const utm = mgrsConverter.latLonToUTM(lat, lon);
                const latBand = mgrsConverter.getLatitudeBand(lat);
                
                const precisionDescriptions = {
                    1: '10 –∫–º',
                    2: '1 –∫–º', 
                    3: '100 –º',
                    4: '10 –º',
                    5: '1 –º'
                };
                
                let result = `<strong>MGRS –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–æ—á–Ω–æ—Å—Ç—è–º–∏:</strong><br><br>`;
                result += `<strong>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:</strong> ${lat.toFixed(6)}¬∞, ${lon.toFixed(6)}¬∞<br>`;
                result += `<strong>UTM –∑–æ–Ω–∞:</strong> ${utm.zone}${latBand} (${utm.hemisphere})<br><br>`;
                
                for (let precision = 1; precision <= 5; precision++) {
                    const mgrsCoord = mgrsConverter.latLonToMGRS(lat, lon, precision);
                    result += `<strong>${precisionDescriptions[precision]}:</strong> ${mgrsCoord}<br>`;
                }
                
                result += `<br><small>–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç–æ—á–Ω—ñ—Å—Ç—å 1–º –¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ –∑–∞–≤–¥–∞–Ω—å</small>`;
                
                showResult(result);
            } catch (error) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó - ' + error.message);
            }
        }
        
        function convertMGRSToLatLon() {
            const mgrsInput = document.getElementById('mgrsInput').value.trim().toUpperCase();
            
            if (!mgrsInput) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –≤–≤–µ–¥—ñ—Ç—å MGRS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏');
                return;
            }
            
            try {
                const [lat, lon] = mgrsConverter.mgrsToLatLon(mgrsInput);
                
                // –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ–ª—è –≤–≤–æ–¥—É
                document.getElementById('latInput').value = lat.toFixed(6);
                document.getElementById('lonInput').value = lon.toFixed(6);
                
                const utm = mgrsConverter.latLonToUTM(lat, lon);
                const latBand = mgrsConverter.getLatitudeBand(lat);
                
                // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ç–æ—á–Ω—ñ—Å—Ç—å –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ MGRS
                const backToMGRS = mgrsConverter.latLonToMGRS(lat, lon);
                const precisionMatch = mgrsInput === backToMGRS;
                
                showResult(`
                    <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó –∑ MGRS:</strong><br><br>
                    <strong>–í—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ:</strong><br>
                    MGRS: <strong>${mgrsInput}</strong><br><br>
                    <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
                    –®–∏—Ä–æ—Ç–∞: ${lat.toFixed(6)}¬∞<br>
                    –î–æ–≤–≥–æ—Ç–∞: ${lon.toFixed(6)}¬∞<br><br>
                    <strong>UTM:</strong><br>
                    –ó–æ–Ω–∞: ${utm.zone}${latBand} (${utm.hemisphere})<br>
                    Easting: ${utm.easting.toFixed(2)} –º<br>
                    Northing: ${utm.northing.toFixed(2)} –º<br><br>
                    <strong>–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:</strong><br>
                    –ó–≤–æ—Ä–æ—Ç–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è: ${backToMGRS}<br>
                    ${precisionMatch ? 
                        '<span style="color: green;">‚úì –¢–æ—á–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–∞</span>' : 
                        '<span style="color: orange;">‚ö† –†—ñ–∑–Ω—ñ —Ä—ñ–≤–Ω—ñ —Ç–æ—á–Ω–æ—Å—Ç—ñ</span>'
                    }
                `);
            } catch (error) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç MGRS –∞–±–æ –ø–æ–º–∏–ª–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó - ' + error.message);
            }
        }
        
        function showOnMap() {
            const lat = parseFloat(document.getElementById('latInput').value);
            const lon = parseFloat(document.getElementById('lonInput').value);
            
            if (isNaN(lat) || isNaN(lon)) {
                showResult('<strong>–ü–æ–º–∏–ª–∫–∞:</strong> –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —à–∏—Ä–æ—Ç–∏ —Ç–∞ –¥–æ–≤–≥–æ—Ç–∏');
                return;
            }
            
            // –°–∏–º—É–ª—è—Ü—ñ—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç—ñ
            showResult(`
                <strong>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ –∫–∞—Ä—Ç—ñ:</strong><br><br>
                –®–∏—Ä–æ—Ç–∞: ${lat.toFixed(6)}¬∞<br>
                –î–æ–≤–≥–æ—Ç–∞: ${lon.toFixed(6)}¬∞<br><br>
                <small>üí° –î–ª—è –ø–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –∫–∞—Ä—Ç–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á Google Maps</small>
            `);
        }
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        document.addEventListener('DOMContentLoaded', function() {
            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ö–∏—î–≤–∞
            document.getElementById('latInput').value = '50.4501';
            document.getElementById('lonInput').value = '30.5234';
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∑—É—î–º–æ –ø—Ä–∏–∫–ª










